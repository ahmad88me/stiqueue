<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Documentation &#8212; stiqueue 1.3.2 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=6625fa76" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=aed331e8"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="stiqueue package" href="stiqueue.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <img src="https://github.com/ahmad88me/stiqueue/raw/main/stiqueue.svg" width="200"><p>StiQueue, short for ‚Äústick queue,‚Äù is inspired by the simplicity of a stick figure.
Just as a stick figure represents minimalism and clarity, StiQueue is a lightweight messaging queue system
designed to be simple, flexible, and easy to use.</p>
<section id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading">¬∂</a></h1>
<p>Explore the full <a class="reference external" href="https://ahmad88me.github.io/stiqueue/">StiQueue Documentation</a> for in-depth code references and usage guides.</p>
</section>
<section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¬∂</a></h1>
<section id="sqserver">
<h2>SQServer<a class="headerlink" href="#sqserver" title="Permalink to this heading">¬∂</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">SQServer</span></code> is the core of StiQueue and manages the messaging queue. It can be run directly with minimal setup.</p>
</section>
<section id="running-the-server">
<h2>Running the Server<a class="headerlink" href="#running-the-server" title="Permalink to this heading">¬∂</a></h2>
<p>Once the code is downloaded, you can start the server with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">PYTHONPATH</span><span class="o">=</span>src<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>stiqueue.sqserver<span class="w"> </span>--host<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span>--port<span class="w"> </span><span class="m">1234</span><span class="w"> </span>--debug
</pre></div>
</div>
<p>üí° The <code class="docutils literal notranslate"><span class="pre">--debug</span></code> flag is useful during the first run to monitor incoming and outgoing messages.</p>
<section id="server-options">
<h3>Server Options<a class="headerlink" href="#server-options" title="Permalink to this heading">¬∂</a></h3>
<p>Below are the available command-line options for the server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">StiQueue</span> <span class="n">Server</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">debug</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">host</span> <span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">port</span> <span class="n">PORT</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">buff</span><span class="o">-</span><span class="n">size</span> <span class="n">BUFF_SIZE</span><span class="p">]</span>

<span class="n">A</span> <span class="n">message</span> <span class="n">queue</span> <span class="n">server</span>

<span class="n">options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">--</span><span class="n">debug</span>                   <span class="n">Showing</span> <span class="n">debug</span> <span class="n">messages</span>
  <span class="o">--</span><span class="n">host</span> <span class="n">HOST</span>               <span class="n">The</span> <span class="n">host</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">server</span>
  <span class="o">--</span><span class="n">port</span> <span class="n">PORT</span>               <span class="n">The</span> <span class="n">port</span> <span class="n">to</span> <span class="n">listen</span> <span class="n">on</span>
  <span class="o">--</span><span class="n">buff</span><span class="o">-</span><span class="n">size</span> <span class="n">BUFF_SIZE</span>     <span class="n">The</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">buffer</span>
  <span class="o">--</span><span class="n">log</span> <span class="n">LOG</span>                 <span class="n">The</span> <span class="n">log</span> <span class="n">file</span>
</pre></div>
</div>
</section>
</section>
<section id="sqclient">
<h2>SQClient<a class="headerlink" href="#sqclient" title="Permalink to this heading">¬∂</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">SQClient</span></code> allows you to interact with the server to enqueue (send) and dequeue (receive) messages.
Ensure the host and port of the client match the server configuration.</p>
<p><strong>Blocking Dequeue</strong>: The deq method is blocking, which is more resource-efficient than polling.</p>
<section id="quick-start">
<h3>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this heading">¬∂</a></h3>
<ol class="arabic simple">
<li><p>Initialize the Client:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">stiqueue</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQClient</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">SQClient</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Enqueue a Message:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">enq</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Dequeue a Message:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">deq</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Received:&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>Often, the client that sends the messages is different from the one receiving them. For instance, one client (or app)
might send requests, while another client fetches these messages or requests when a resource becomes available.
It is also helpful to use a Thread Pool, such as <a class="reference external" href="https://github.com/oeg-upm/TPool">TPool</a>, to manage the number
of running threads.</p>
</section>
<section id="methods">
<h3>Methods<a class="headerlink" href="#methods" title="Permalink to this heading">¬∂</a></h3>
<p>The following methods are supported by <code class="docutils literal notranslate"><span class="pre">stiqueue</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">enq(msg:</span> <span class="pre">bytes)</span></code>: Adds a message to the queue.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deq()</span> <span class="pre">-&gt;</span> <span class="pre">bytes</span></code>: Retrieves the next message from the queue (blocking call).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnt()</span> <span class="pre">-&gt;</span> <span class="pre">int</span></code>: Returns the number of messages currently in the queue.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">peek(n:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">sep:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">&quot;,&quot;)</span> <span class="pre">-&gt;</span> <span class="pre">bytes</span></code>: Retrieves up to <code class="docutils literal notranslate"><span class="pre">n</span></code> messages from the queue <strong>without removing them</strong>.</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">n=0</span></code>, returns <strong>all available messages</strong>.</p></li>
<li><p>Otherwise, returns up to <code class="docutils literal notranslate"><span class="pre">n</span></code> messages, separated by <code class="docutils literal notranslate"><span class="pre">sep</span></code>.</p></li>
<li><p>If the queue is empty, returns an empty byte string (<code class="docutils literal notranslate"><span class="pre">b&quot;&quot;</span></code>).</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p><strong>Note</strong>: When <code class="docutils literal notranslate"><span class="pre">ack_required=True</span></code> and the client process crashes after calling <code class="docutils literal notranslate"><span class="pre">deq</span></code>, messages are automatically
re-queued to ensure they are not lost.</p>
</div></blockquote>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¬∂</a></h2>
<section id="basic-client-usage">
<h3>Basic Client Usage<a class="headerlink" href="#basic-client-usage" title="Permalink to this heading">¬∂</a></h3>
<p>The following is a simple example of how to use the <code class="docutils literal notranslate"><span class="pre">SQClient</span></code> to enqueue and dequeue messages from the server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">stiqueue</span><span class="w"> </span><span class="kn">import</span> <span class="n">SQClient</span>

<span class="c1"># Initialize the client</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">SQClient</span><span class="p">()</span>

<span class="c1"># Enqueue messages</span>
<span class="n">client</span><span class="o">.</span><span class="n">enq</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;First message&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">enq</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;Second message&quot;</span><span class="p">)</span>

<span class="c1"># Dequeue and process messages</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">deq</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>  <span class="c1"># Output: First message</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">deq</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>  <span class="c1"># Output: Second message</span>
</pre></div>
</div>
<p><strong>Note:</strong> The <code class="docutils literal notranslate"><span class="pre">decode()</span></code> method is used because the <code class="docutils literal notranslate"><span class="pre">deq()</span></code> method returns the messages as <code class="docutils literal notranslate"><span class="pre">bytes</span></code>,
which need to be decoded to a string for readability.</p>
<section id="using-a-thread-pool">
<h4>Using a Thread Pool<a class="headerlink" href="#using-a-thread-pool" title="Permalink to this heading">¬∂</a></h4>
<p>You can integrate a thread pool, such as <a class="reference external" href="https://github.com/oeg-upm/TPool">TPool</a>, for managing concurrent client operations.</p>
</section>
</section>
</section>
<section id="extending-stiqueue">
<h2>Extending StiQueue<a class="headerlink" href="#extending-stiqueue" title="Permalink to this heading">¬∂</a></h2>
<p>StiQueue is designed to be flexible and extensible. You can add custom functionality to the server or client as needed.
Examples of extending StiQueue are available in the
<a class="reference external" href="https://github.com/ahmad88me/stiqueue/tree/main/example">examples</a> directory.</p>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this heading">¬∂</a></h2>
<p>Run the unit tests to ensure everything is working as expected.</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">unittest</span> <span class="pre">discover</span></code></p>
</section>
<section id="run-a-specific-test">
<h2>Run a Specific Test<a class="headerlink" href="#run-a-specific-test" title="Permalink to this heading">¬∂</a></h2>
<p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;test_file_name&gt;</span></code> with the desired test file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">tests</span><span class="o">.&lt;</span><span class="n">test_file_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="key-highlights">
<h1>Key Highlights<a class="headerlink" href="#key-highlights" title="Permalink to this heading">¬∂</a></h1>
<ul class="simple">
<li><p><strong>Lightweight and Flexible</strong>: Minimal dependencies and easy to integrate.</p></li>
<li><p><strong>Blocking Dequeue</strong>: Efficient for resource-limited systems.</p></li>
<li><p><strong>Reliable Messaging</strong>: Optional message acknowledgments to ensure no data loss.</p></li>
</ul>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stiqueue.html">stiqueue package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stiqueue.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="stiqueue.html#module-stiqueue.peekqueue">stiqueue.peekqueue module</a></li>
<li class="toctree-l2"><a class="reference internal" href="stiqueue.html#module-stiqueue.sqclient">stiqueue.sqclient module</a></li>
<li class="toctree-l2"><a class="reference internal" href="stiqueue.html#stiqueue-sqserver-module">stiqueue.sqserver module</a></li>
<li class="toctree-l2"><a class="reference internal" href="stiqueue.html#module-contents">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/client_example.html">Client Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/server_example.html">Server Example</a></li>
</ul>
</li>
</ul>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">stiqueue</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stiqueue.html">stiqueue package</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
      <li>Next: <a href="stiqueue.html" title="next chapter">stiqueue package</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2025, Ahmad Alobaid.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>